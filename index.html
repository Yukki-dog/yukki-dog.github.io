<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Yukki site </title>
<!-- –°—Ç–∏–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
<style>/* ... (–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –∫–∞–∫ –µ—Å—Ç—å, –∫–∞–∫ —Ç—ã –ø—Ä–∏—Å–ª–∞–ª–∞) ... */</style>
</head>
<body class="day-theme">

<div id="container">
  <!-- ... –≤–µ—Å—å HTML –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –æ—Å—Ç–∞—ë—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º ... -->

  <!-- –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ -->
  <div id="votingSection">
    <h2 id="voteMessageTitle"></h2>
    <div id="voteOptions"></div>
    <button id="voteBtn" disabled>–ì–æ–ª–æ—Å–æ–≤–∞—Ç—å</button>
    <button id="resetVotesBtn">–°–±—Ä–æ—Å–∏—Ç—å –≥–æ–ª–æ—Å–∞</button>
    <div id="results"></div>
    <div id="voteMessage" style="margin-top: 1rem; color: #b03060; font-weight: 600;"></div>
  </div>

  <button id="toTopBtn" title="–ù–∞–≤–µ—Ä—Ö">ü†ï</button>
</div>

<!-- –ê—É–¥–∏–æ -->
<audio id="barkSound1" src="1.m4a" preload="auto"></audio>
<audio id="barkSound2" src="2.m4a" preload="auto"></audio>
<audio id="meowSound" src="3.m4a" preload="auto"></audio>
<audio id="bgMusic" src="Cat_life_KotikMurKotikUA.mp3" loop preload="auto"></audio>

<!-- üêæ –ö–ª–∏–∫–µ—Ä –Æ–∫–∫–∏ -->
<section id="yukki-clicker" style="text-align:center; padding:30px 0;">
  <img id="clickerYukki" src="yukki_skin_default.png" alt="–Æ–∫–∫–∏" style="width:150px; cursor:pointer; transition:transform 0.1s;">
  <div style="font-size:1.8em; margin-top:10px;">üçó <span id="clickCount">0</span></div>
</section>

<script>
// ... –≤—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–∫—Ä–∏–ø—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è ...

// === –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ ===
const voteOptionsEl = document.getElementById("voteOptions");
const voteBtn = document.getElementById("voteBtn");
const resetVotesBtn = document.getElementById("resetVotesBtn");
const resultsEl = document.getElementById("results");
const voteMessageEl = document.getElementById("voteMessage");
const voteMessageTitle = document.getElementById("voteMessageTitle");

function buildVotingSection() {
  const today = new Date();
  const day = today.getDate();
  const groups = texts[lang].voteGroups;
  const bannedDays = texts[lang].voteNoVotingDays;

  if (bannedDays.includes(day)) {
    voteOptionsEl.innerHTML = "";
    voteBtn.disabled = true;
    voteMessageEl.textContent = texts[lang].voteAlready;
    voteMessageTitle.textContent = texts[lang].voteMessage;
    return;
  }

  const group = groups.find(g => day >= g.range[0] && day <= g.range[1]);
  if (!group) {
    voteOptionsEl.innerHTML = "";
    voteBtn.disabled = true;
    voteMessageEl.textContent = "";
    voteMessageTitle.textContent = "";
    return;
  }

  const options = group.options;
  voteOptionsEl.innerHTML = options.map((opt, i) =>
    `<div class="vote-option"><input type="radio" name="vote" id="vote${i}" value="${i}"><label for="vote${i}">${opt}</label></div>`
  ).join("");

  voteBtn.disabled = false;
  voteMessageEl.textContent = "";
  voteMessageTitle.textContent = texts[lang].voteMessage;

  // –µ—Å–ª–∏ –≥–æ–ª–æ—Å–æ–≤–∞–ª ‚Äî –æ—Ç–∫–ª—é—á–∏—Ç—å
  if (localStorage.getItem("voted-day") === day.toString()) {
    voteBtn.disabled = true;
    voteMessageEl.textContent = texts[lang].voteAlready;
    showResults();
  }
}

function showResults() {
  const today = new Date();
  const day = today.getDate();
  const votes = JSON.parse(localStorage.getItem("votes-" + day)) || {};
  const total = Object.values(votes).reduce((a, b) => a + b, 0);
  if (total === 0) {
    resultsEl.textContent = "";
    return;
  }
  const resultLines = Object.entries(votes).map(([k, v]) => {
    const label = document.querySelector(`label[for="vote${k}"]`).textContent;
    const percent = ((v / total) * 100).toFixed(1);
    return `${label}: ${v} –≥–æ–ª–æ—Å–æ–≤ (${percent}%)`;
  });
  resultsEl.innerHTML = `<strong>${texts[lang].resultsTitle}</strong><br>` + resultLines.join("<br>");
}

voteBtn.addEventListener("click", () => {
  const selected = document.querySelector("input[name='vote']:checked");
  if (!selected) {
    voteMessageEl.textContent = texts[lang].voteChooseOption;
    return;
  }
  const today = new Date();
  const day = today.getDate();
  const voteKey = selected.value;
  const voteStorageKey = "votes-" + day;
  const votes = JSON.parse(localStorage.getItem(voteStorageKey)) || {};

  votes[voteKey] = (votes[voteKey] || 0) + 1;
  localStorage.setItem(voteStorageKey, JSON.stringify(votes));
  localStorage.setItem("voted-day", day.toString());
  voteBtn.disabled = true;
  voteMessageEl.textContent = texts[lang].voteThanks;
  showResults();
});

resetVotesBtn.addEventListener("click", () => {
  const day = new Date().getDate();
  localStorage.removeItem("votes-" + day);
  localStorage.removeItem("voted-day");
  buildVotingSection();
  resultsEl.textContent = "";
});

buildVotingSection();
</script>

</body>
</html>
